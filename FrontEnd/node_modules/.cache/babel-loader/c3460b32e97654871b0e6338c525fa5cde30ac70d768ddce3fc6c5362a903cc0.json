{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\n// import { getFirestore } from \"firebase/firestore\";\n// TODO: Add SDKs for Firebase products that you want to use\n// https://firebase.google.com/docs/web/setup#available-libraries\nimport { GoogleAuthProvider, getAuth, signInWithPopup, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut } from \"firebase/auth\";\nimport { getFirestore, query, getDocs, collection, where, addDoc } from \"firebase/firestore\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDN6NGrXM6DRX1qxmilc-Mlh_rkUQb4TPI\",\n  authDomain: \"todo-app-28daa.firebaseapp.com\",\n  projectId: \"todo-app-28daa\",\n  storageBucket: \"todo-app-28daa.appspot.com\",\n  messagingSenderId: \"641984070707\",\n  appId: \"1:641984070707:web:e79e010e20a57c667b8f46\"\n};\n\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\n//google auth\nconst googleProvider = new GoogleAuthProvider();\nconst signInWithGoogle = async () => {\n  try {\n    const res = await signInWithPopup(auth, googleProvider);\n    const user = res.user;\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\n    const docs = await getDocs(q);\n    if (docs.docs.length === 0) {\n      await addDoc(collection(db, \"users\"), {\n        uid: user.uid,\n        //name: user.name,\n        authProvider: \"google\",\n        //email: user.email,\n        identifier: user.email\n      });\n    }\n  } catch (err) {\n    console.log(err);\n    alert(err.message);\n  }\n};\n\n// username and password\nconst logInWithEmailAndPassword = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n  } catch (err) {\n    console.log(err);\n    alert(err.message);\n  }\n};\n\n// register with email and password\nconst registerWithEmailAndPassword = async (name, email, password) => {\n  try {\n    const res = await createUserWithEmailAndPassword(auth, email, password);\n    const user = res.user;\n    await addDoc(collection(db, \"users\"), {\n      uid: user.uid,\n      name,\n      authProvider: \"local\",\n      email\n    });\n  } catch (err) {\n    console.log(err);\n    alert(err.message);\n  }\n};\nconst sendPasswordReset = async email => {\n  try {\n    await sendPasswordResetEmail(auth, email);\n    alert(\"Password reset link sent!\");\n  } catch (err) {\n    console.log(err);\n    alert(err.message);\n  }\n};\nconst logout = () => {\n  signOut(auth);\n};\nexport { db, auth, signInWithGoogle, logInWithEmailAndPassword, registerWithEmailAndPassword, sendPasswordReset, logout };","map":{"version":3,"names":["initializeApp","GoogleAuthProvider","getAuth","signInWithPopup","signInWithEmailAndPassword","createUserWithEmailAndPassword","sendPasswordResetEmail","signOut","getFirestore","query","getDocs","collection","where","addDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","auth","googleProvider","signInWithGoogle","res","user","q","uid","docs","length","authProvider","identifier","email","err","console","log","alert","message","logInWithEmailAndPassword","password","registerWithEmailAndPassword","name","sendPasswordReset","logout"],"sources":["C:/Users/Edward Alvin/Semester 4/WADS/reactapi/FrontEnd/src/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\n// import { getFirestore } from \"firebase/firestore\";\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\nimport {\r\n  GoogleAuthProvider,\r\n  getAuth,\r\n  signInWithPopup,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  sendPasswordResetEmail,\r\n  signOut,\r\n} from \"firebase/auth\";\r\nimport {\r\n  getFirestore,\r\n  query,\r\n  getDocs,\r\n  collection,\r\n  where,\r\n  addDoc,\r\n} from \"firebase/firestore\";\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDN6NGrXM6DRX1qxmilc-Mlh_rkUQb4TPI\",\r\n  authDomain: \"todo-app-28daa.firebaseapp.com\",\r\n  projectId: \"todo-app-28daa\",\r\n  storageBucket: \"todo-app-28daa.appspot.com\",\r\n  messagingSenderId: \"641984070707\",\r\n  appId: \"1:641984070707:web:e79e010e20a57c667b8f46\",\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\n//google auth\r\nconst googleProvider = new GoogleAuthProvider();\r\nconst signInWithGoogle = async () => {\r\n  try {\r\n    const res = await signInWithPopup(auth, googleProvider);\r\n    const user = res.user;\r\n    const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user.uid));\r\n    const docs = await getDocs(q);\r\n    if (docs.docs.length === 0) {\r\n      await addDoc(collection(db, \"users\"), {\r\n        uid: user.uid,\r\n        //name: user.name,\r\n        authProvider: \"google\",\r\n        //email: user.email,\r\n        identifier: user.email,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\n// username and password\r\nconst logInWithEmailAndPassword = async (email, password) => {\r\n  try {\r\n    await signInWithEmailAndPassword(auth, email, password);\r\n  } catch (err) {\r\n    console.log(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\n// register with email and password\r\nconst registerWithEmailAndPassword = async (name, email, password) => {\r\n  try {\r\n    const res = await createUserWithEmailAndPassword(auth, email, password);\r\n    const user = res.user;\r\n    await addDoc(collection(db, \"users\"), {\r\n      uid: user.uid,\r\n      name,\r\n      authProvider: \"local\",\r\n      email,\r\n    });\r\n  } catch (err) {\r\n    console.log(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\nconst sendPasswordReset = async (email) => {\r\n  try {\r\n    await sendPasswordResetEmail(auth, email);\r\n    alert(\"Password reset link sent!\");\r\n  } catch (err) {\r\n    console.log(err);\r\n    alert(err.message);\r\n  }\r\n};\r\n\r\nconst logout = () => {\r\n  signOut(auth);\r\n};\r\n\r\nexport {\r\n  db,\r\n  auth,\r\n  signInWithGoogle,\r\n  logInWithEmailAndPassword,\r\n  registerWithEmailAndPassword,\r\n  sendPasswordReset,\r\n  logout,\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}